<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Analyse 3D biological image data especially neurons — nat-package • nat</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Analyse 3D biological image data especially neurons — nat-package"><meta property="og:description" content="nat provides tools to read, analyse, plot, transform and convert
neuroanatomical data, especially representations of neurons."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.10.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/neurons-intro.html">Introduction to neurons and neuronlists</a>
    </li>
    <li>
      <a href="../articles/neurons-as-graph.html">Working with individual neurons as graph structures</a>
    </li>
    <li>
      <a href="../articles/plotly.html">3D graphics</a>
    </li>
    <li>
      <a href="../articles/NeuroGeometry.html">NeuroGeometry: Analysing 3D morphology of neurons</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/Installation.html">Installation</a>
</li>
<li>
  <a href="../index.html#learn">Learn</a>
</li>
<li>
  <a href="../index.html#help">Help</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://natverse.github.io" class="external-link">natverse</a>
</li>
<li>
  <a href="https://github.com/natverse/nat" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Analyse 3D biological image data especially neurons</h1>
    <small class="dont-index">Source: <a href="https://github.com/natverse/nat/blob/HEAD/R/nat-package.R" class="external-link"><code>R/nat-package.R</code></a></small>
    <div class="hidden name"><code>nat-package.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><b>nat</b> provides tools to read, analyse, plot, transform and convert
neuroanatomical data, especially representations of neurons.</p>
    </div>


    <div id="neuron-objects">
    <h2>Neuron Objects</h2>
    <p>At present there are 2 main representations of
  neuronal data:</p>
<p></p><ul><li><p><code><a href="neuron.html">neuron</a></code> objects contain one or more connected trees
  that make up a neuron</p></li>
<li><p><code><a href="dotprops.html">dotprops</a></code> objects can contain one (or more) neurons
  represented as points and tangent vectors in which the connectivity
  information has been discarded</p></li>
</ul><p>The <code>subset</code> function has both <code><a href="subset.neuron.html">subset.neuron</a></code> and
  <code><a href="subset.dotprops.html">subset.dotprops</a></code> methods, which can be used to keep (or
  reject) specified vertices within a neuron e.g. by spatial constraints.
  <code><a href="subset.neuron.html">subset.neuron</a></code> will look after the tree structure of neurons
  in these circumstances.</p>
<p><code>neuron</code> objects containing connected trees can be converted to
  <code><a href="ngraph.html">ngraph</a></code> objects, a lightweight wrapper around the
  <code>igraph</code> library's <code><a href="https://rdrr.io/pkg/igraph/man/make_graph.html" class="external-link">graph</a></code> class that
  preserves 3D coordinate information. This allows neurons to be manipulated
  based on their graph structure, e.g. by finding all nodes upstream (closer
  to the root) or downstream of a given node. The <code><a href="neuron.html">as.neuron</a></code>
  function can convert <code>ngraph</code> objects back to <code>neuron</code>s or
  selected vertex indices can be used to subset a neuron with
  <code><a href="subset.neuron.html">subset.neuron</a></code>.</p>
    </div>
    <div id="collections-of-neurons">
    <h2>Collections of Neurons</h2>
    <p>Neurons can be collected as
  <code><a href="neuronlist.html">neuronlist</a></code> objects, which contain multiple
  <code><a href="neuron.html">neuron</a></code> or <code>dotprops</code> objects along with an attached
  dataframe of metadata. The metadata can be accessed and manipulated using
  the <code>myneuronlist[i,j]</code> notation (see
  <code><a href="neuronlist-dataframe-methods.html">neuronlist-dataframe-methods</a></code>).</p>
<p>Neurons can be read in to a neuronlist using <code><a href="read.neurons.html">read.neurons</a></code> or
  written out using <code><a href="write.neurons.html">write.neurons</a></code> with support for many of the
  most common formats including swc.</p>
<p>Metadata can be used to colour or subset the neurons during plotting (see
  <code><a href="plot3d.neuronlist.html">plot3d.neuronlist</a></code> and <code><a href="subset.neuronlist.html">subset.neuronlist</a></code>).
  Interactive 3D selection of neurons in a neuronlist is also possible using
  <code><a href="find.neuron.html">find.neuron</a></code> (which makes use of <code>rgl</code>'s
  <code><a href="https://dmurdoch.github.io/rgl/dev/reference/select3d.html" class="external-link">select3d</a></code> function.</p>
<p><code>neuronlist</code> objects also provide additional functionality to
  streamline arithmetic (e.g. scaling all the points in all neurons see
  <code><a href="neuronlist-arithmetic.html">*.neuronlist</a></code>) and transformations (see <b>Transformations</b>
  section below and <code><a href="xform.html">xform</a></code>). Arbitrary functions can be applied
  to each individual neuron using the <code><a href="nlapply.html">nlapply</a></code> function, which
  also provides options for progress bars and simple parallelisation.</p>
    </div>
    <div id="transformations">
    <h2>Transformations</h2>
    <p><code><a href="neuron.html">neuron</a></code> or <code><a href="dotprops.html">dotprops</a></code>
  objects can be transformed from e.g. sample to template brain space using
  affine or non-rigid registrations. <b>nat</b> has built in support for
  registrations calculated with the open source CMTK package available at
  <a href="www.nitrc.org/projects/cmtk">www.nitrc.org/projects/cmtk</a>. See ?<a href="cmtk.bindir.html">cmtk</a> for installation
  details. The function <code><a href="xform.html">xform</a></code> has methods to deal with a
  variety of types of interest.</p>
    </div>
    <div id="-d-image-data">
    <h2>3D Image Data</h2>
    <p>In addition to data types defined by unstructured
  collections of 3D vertices such as <code><a href="neuron.html">neuron</a></code>,
  <code><a href="dotprops.html">dotprops</a></code> and <code><a href="read.hxsurf.html">hxsurf</a></code> objects nat provides the
  <code><a href="im3d.html">im3d</a></code> class to handle image/density data on a regular grid.
  I/O is handled by <code><a href="im3d-io.html">read.im3d</a></code> and <code><a href="im3d-io.html">write.im3d</a></code>,
  which are currently implemented for the AmiraMesh and NRRD file formats;
  there is also read only access to the <a href="www.vaa3d.org/">vaa3d</a> raw
  format.</p>
<p>Spatial information can be queried with <code><a href="voxdims.html">voxdims</a></code>,
  <code><a href="boundingbox.html">boundingbox</a></code> and <code><a href="im3d-coords.html">ijkpos</a></code>, <code><a href="im3d-coords.html">xyzpos</a></code>
  methods. You can convert between voxel data and coordinate (vertex) -based
  representations using the following functions:</p>
<p></p><ul><li><p><code><a href="as.im3d.html">as.im3d</a></code> The <code>as.im3d.matrix</code> method converts XYZ
  coordinates to an <code>im3d</code> image volume</p></li>
<li><p><code><a href="ind2coord.html">ind2coord</a></code> Find XYZ coordinates of specified voxels of
  an <code>im3d</code> image volume</p></li>
<li><p><code><a href="dotprops.html">dotprops</a></code> The <code>dotprops.im3d</code> method converts an
  <code>im3d</code> object to a <code>dotprops</code> format neuron, i.e. a cloud of
  unconnected segments.</p></li>
</ul></div>
    <div id="surface-data">
    <h2>Surface Data</h2>
    <p><b>nat</b> can read, write, transform and subset
  surface (mesh) objects defined by Amira's HxSurface class. See
  <code><a href="read.hxsurf.html">read.hxsurf</a></code> and links therein. In addition hxsurf objects can
  be converted to the <code><a href="https://dmurdoch.github.io/rgl/dev/reference/mesh3d.html" class="external-link">mesh3d</a></code> format, which provides a link
  to the <code><a href="https://dmurdoch.github.io/rgl/dev/reference/rgl-package.html" class="external-link">rgl</a></code> package and also to packages for
  morphometrics and sophisticated mesh manipulation such as
  <a href="https://cran.r-project.org/package=Morpho" class="external-link">Morpho</a> and
  <a href="https://cran.r-project.org/package=Rvcg" class="external-link">Rvcg</a>.</p>
    </div>
    <div id="rgl-package">
    <h2>rgl Package</h2>
    <p><b>nat</b> uses the <b><code><a href="https://dmurdoch.github.io/rgl/dev/reference/rgl-package.html" class="external-link">rgl</a></code></b>
  package extensively for 3D visualisation. <code>rgl</code>'s core function is to
  provide interactive visualisation (usually in an X11 window depending on
  OpenGL - and therefore on a graphics card or OpenGL software emulator) but
  recently significant functionality for static snapshots and embedding
  results in reports such as web pages has been added. With this in mind,
  Duncan Murdoch has added the <code><a href="https://dmurdoch.github.io/rgl/dev/reference/rgl.useNULL.html" class="external-link">rgl.useNULL</a></code> option. As of
  nat 1.8.0, <code>options(rgl.useNULL=TRUE)</code> will be set before nat is
  loaded in non-interactive R sessions. If you want to use nat in interactive
  environments where X11 is not available, you may want to set
  <code>options(rgl.useNULL=TRUE)</code> manually before loading nat.</p>
    </div>
    <div id="plotly-package">
    <h2>plotly Package</h2>
    <p>Since <b>nat</b> v1.9.2 there is support for
  <code><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plotly</a></code> as an alternative 3D visualisation
  engine. You can set <code>option(nat.plotengine='plotly')</code> to make this the
  default. See the 3D graphics vignette for further details.</p>
    </div>
    <div id="file-formats">
    <h2>File Formats</h2>
    <p><b>nat</b> supports multiple input and output data
  formats for the object classes. There is a registry-based mechanism which
  allows support for reading or writing specific file formats (see
  <code><a href="fileformats.html">fileformats</a></code>) to be plugged in to reasonably generic functions
  such as <code><a href="read.neurons.html">read.neurons</a></code>. It is perfectly possible for other R
  packages or end users to extend the supported list of file types by
  registering new read/write or identification functions.</p>
    </div>
    <div id="package-options">
    <h2>Package Options</h2>
    <p>The following options can be set to specify default
  behaviour.</p>
<p></p><ul><li><p><code>nat.cmtk.bindir</code> Location of CMTK binaries. See
  <code><a href="cmtk.bindir.html">cmtk.bindir</a></code></p></li>
<li><p><code>nat.default.neuronlist</code> A character string naming a
  <code><a href="neuronlist.html">neuronlist</a></code> to use with the <code><a href="plot3d.neuronlist.html">plot3d.character</a></code>
  method</p></li>
<li><p><code>nat.plotengine</code> A character string naming a plotengine to use
  either 'rgl' or 'plotly'. rgl is the default if unset, see <code>3D
  Graphics</code> vignette for details.</p></li>
<li><p><code>nat.progress</code> The default progress reporter to use with
  <code><a href="nlapply.html">nlapply</a></code>. See <code><a href="https://rdrr.io/pkg/plyr/man/create_progress_bar.html" class="external-link">create_progress_bar</a></code> for
  possible values. When unset is equivalent to special value <code>'auto'</code>.
  To suppress altogether, use <code>nat.progress="none"</code>.</p></li>
<li><p><code>nat.use_natcpp</code> Whether or not to use the
  <a href="https://natverse.org/natcpp/" class="external-link">natcpp</a> package (if available) to
  accelerate some basic neuron processing functions. Set to <code>FALSE</code> if
  you don't want this to happen.</p></li>
</ul><p>In addition there is one read-only option:</p><ul><li><p><code>nat.cmtk.version</code> which is used to store the current cmtk
  version when there are repeated calls to <code><a href="cmtk.version.html">cmtk.version</a></code>.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="neuron.html">neuron</a></code>, <code><a href="dotprops.html">dotprops</a></code>,
  <code><a href="neuronlist.html">neuronlist</a></code>, <code><a href="nlapply.html">nlapply</a></code>, <code><a href="plot3d.html">plot3d</a></code>,
  <code><a href="xform.html">xform</a></code>, <code><a href="im3d.html">im3d</a></code>, <code><a href="read.hxsurf.html">read.hxsurf</a></code>,
  <code><a href="https://dmurdoch.github.io/rgl/dev/reference/rgl-package.html" class="external-link">rgl</a></code> which is used for visualisation,
  <code><a href="fileformats.html">fileformats</a></code>, <code><a href="read.neurons.html">read.neurons</a></code>, <code><a href="cmtk.bindir.html">cmtk</a></code>.</p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gregory Jefferis, James Manton, Sridhar Jagannathan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

