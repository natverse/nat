<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>A simple wrapper class for multiple transformations — reglist • nat</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="A simple wrapper class for multiple transformations — reglist"><meta property="og:description" content="A reglist is read as a set of transformations to be 
  applied sequentially starting with the first element, then applying the 
  second transformation to the result of the first and so on. Each individual
  transformation is considered to map data from the sample (floating/moving) 
  space to the reference (fixed/template) space.  
Each transformation may have an attribute &quot;swap&quot; indicating that the
  natural direction of the transformation should be swapped (i.e. inverted). 
  This can be done trivially in the case of affine transformations, 
  expensively for others such as CMTK registrations (see 
  cmtkreg) and not at all for others. Note that the term 'swap'
  is used to avoid a direct equivalence with inversion - many registration 
  tools use the term inverse for directions that one might naively 
  think of as as the natural direction of the transformation (see 
  xformpoints.cmtkreg for discussion).
invert_reglist inverts a reglist object
c.reglist combines multiple reglists into a single
  reglist."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.10.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/neurons-intro.html">Introduction to neurons and neuronlists</a>
    </li>
    <li>
      <a href="../articles/neurons-as-graph.html">Working with individual neurons as graph structures</a>
    </li>
    <li>
      <a href="../articles/plotly.html">3D graphics</a>
    </li>
    <li>
      <a href="../articles/NeuroGeometry.html">NeuroGeometry: Analysing 3D morphology of neurons</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/Installation.html">Installation</a>
</li>
<li>
  <a href="../index.html#learn">Learn</a>
</li>
<li>
  <a href="../index.html#help">Help</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://natverse.github.io" class="external-link">natverse</a>
</li>
<li>
  <a href="https://github.com/natverse/nat" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>A simple wrapper class for multiple transformations</h1>
    <small class="dont-index">Source: <a href="https://github.com/natverse/nat/blob/HEAD/R/reglist.R" class="external-link"><code>R/reglist.R</code></a></small>
    <div class="hidden name"><code>reglist.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A <code>reglist</code> is read as a set of transformations to be 
  applied sequentially starting with the first element, then applying the 
  second transformation to the result of the first and so on. Each individual
  transformation is considered to map data from the sample (floating/moving) 
  space to the reference (fixed/template) space.</p>  
<p>Each transformation may have an attribute <code>"swap"</code> indicating that the
  natural direction of the transformation should be swapped (i.e. inverted). 
  This can be done trivially in the case of affine transformations, 
  expensively for others such as CMTK registrations (see 
  <code><a href="cmtkreg.html">cmtkreg</a></code>) and not at all for others. Note that the term 'swap'
  is used to avoid a direct equivalence with inversion - many registration 
  tools use the term <em>inverse</em> for directions that one might naively 
  think of as as the natural direction of the transformation (see 
  <code><a href="xformpoints.html">xformpoints.cmtkreg</a></code> for discussion).</p>
<p><code>invert_reglist</code> inverts a reglist object</p>
<p><code>c.reglist</code> combines multiple <code>reglist</code>s into a single
  <code>reglist</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">reglist</span><span class="op">(</span><span class="va">...</span>, swap <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>

<span class="fu">invert_reglist</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>

<span class="co"># S3 method for reglist</span>
<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">...</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>...</dt>
<dd><p>One or more transformations/reglists to combine</p></dd>
<dt>swap</dt>
<dd><p>A vector of the same length as <code>...</code> indicating whether the 
direction of each transformation should be swapped (i.e. mapping reference 
-&gt; sample).</p></dd>
<dt>x</dt>
<dd><p>A reglist object to invert</p></dd>
<dt>recursive</dt>
<dd><p>Presently ignored</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The swap argument is provided as a convenience, but an attribute
  <code>'swap'</code> can also be set directly on each registration.</p>
    </div>
    <div id="inversion">
    <h2>Inversion</h2>
    <p><code>invert_reglist</code> takes a minimal approach to 
  inversion. It reverses the order of the individual elements of the 
  registration and tags each of them with a swap attribute (or changes the
  value of the attribute if it already exists)</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="xform.html">xform</a></code></p>
<p><code><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">I</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span class="r-in"><span class="va">S</span><span class="op">=</span><span class="va">I</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">S</span><span class="op">)</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rl</span><span class="op">=</span><span class="fu">reglist</span><span class="op">(</span><span class="va">S</span>, <span class="va">I</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rli</span><span class="op">=</span><span class="fu">invert_reglist</span><span class="op">(</span><span class="va">rl</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## We can check the inversion by simplifying</span></span>
<span class="r-in"><span class="va">m</span><span class="op">=</span><span class="fu"><a href="simplify_reglist.html">simplify_reglist</a></span><span class="op">(</span><span class="va">rl</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span class="r-in"><span class="va">mi</span><span class="op">=</span><span class="fu"><a href="simplify_reglist.html">simplify_reglist</a></span><span class="op">(</span><span class="va">rli</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span class="r-in"><span class="co"># NB solve will invert a homogeneous affine matrix</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">mi</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span class="va">I</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span class="r-in"><span class="va">S</span><span class="op">=</span><span class="va">I</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">S</span><span class="op">)</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rl</span><span class="op">=</span><span class="fu">reglist</span><span class="op">(</span><span class="va">S</span>, <span class="va">I</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rl2</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">rl</span>, <span class="st">'path/to/my/reg.list'</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rl3</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">reglist</span><span class="op">(</span><span class="st">'path/to/my/reg.list'</span><span class="op">)</span>, <span class="va">rl</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gregory Jefferis, James Manton, Sridhar Jagannathan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

