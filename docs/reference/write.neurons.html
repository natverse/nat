<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Write neurons from a neuronlist object to individual files, or a zip archive — write.neurons • nat</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Write neurons from a neuronlist object to individual files, or a zip archive — write.neurons"><meta property="og:description" content="Write neurons from a neuronlist object to individual files, or a zip archive"><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.10.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/neurons-intro.html">Introduction to neurons and neuronlists</a>
    </li>
    <li>
      <a href="../articles/neurons-as-graph.html">Working with individual neurons as graph structures</a>
    </li>
    <li>
      <a href="../articles/plotly.html">3D graphics</a>
    </li>
    <li>
      <a href="../articles/NeuroGeometry.html">NeuroGeometry: Analysing 3D morphology of neurons</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/Installation.html">Installation</a>
</li>
<li>
  <a href="../index.html#learn">Learn</a>
</li>
<li>
  <a href="../index.html#help">Help</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://natverse.github.io" class="external-link">natverse</a>
</li>
<li>
  <a href="https://github.com/natverse/nat" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Write neurons from a neuronlist object to individual files, or a zip archive</h1>
    <small class="dont-index">Source: <a href="https://github.com/natverse/nat/blob/HEAD/R/neuron-io.R" class="external-link"><code>R/neuron-io.R</code></a></small>
    <div class="hidden name"><code>write.neurons.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Write neurons from a neuronlist object to individual files, or a zip archive</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">write.neurons</span><span class="op">(</span>
  <span class="va">nl</span>,
  <span class="va">dir</span>,
  format <span class="op">=</span> <span class="cn">NULL</span>,
  subdir <span class="op">=</span> <span class="cn">NULL</span>,
  INDICES <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">nl</span><span class="op">)</span>,
  files <span class="op">=</span> <span class="cn">NULL</span>,
  include.data.frame <span class="op">=</span> <span class="cn">FALSE</span>,
  metadata <span class="op">=</span> <span class="cn">FALSE</span>,
  Force <span class="op">=</span> <span class="cn">FALSE</span>,
  cl <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>nl</dt>
<dd><p>neuronlist object</p></dd>
<dt>dir</dt>
<dd><p>directory to write neurons, or path to zip archive (see Details).</p></dd>
<dt>format</dt>
<dd><p>Unique abbreviation of one of the registered file formats for
neurons including 'swc', 'hxlineset', 'hxskel' (skeletons) and 'ply', 'obj'
(neuron meshes). If no format can be extracted from the filename or the
<code>ext</code> parameter, then it defaults to 'swc' for skeletons and 'ply' for
meshes.</p></dd>
<dt>subdir</dt>
<dd><p>String naming field in neuron that specifies a subdirectory OR
expression to evaluate in the context of neuronlist's df attribute</p></dd>
<dt>INDICES</dt>
<dd><p>Character vector of the names of a subset of neurons in
neuronlist to write.</p></dd>
<dt>files</dt>
<dd><p>Character vector or expression specifying output filenames. See
examples and <code><a href="write.neuron.html">write.neuron</a></code> for details.</p></dd>
<dt>include.data.frame</dt>
<dd><p>Whether to include the metadata when writing a zip
file (it will be called <code>"write.neurons.dataframe.rds"</code>).</p></dd>
<dt>metadata</dt>
<dd><p>Whether to encode some metadata in the header file (currently
only supported for SWC format). Either a data.frame or <code>TRUE</code> to
indicate that the attached data.frame should be written. Default
<code>FALSE</code>.</p></dd>
<dt>Force</dt>
<dd><p>Whether to overwrite an existing file</p></dd>
<dt>cl</dt>
<dd><p>Either the integer number of cores to use for parallel writes (2 or
3 seem useful) or a <code>cluster</code> object created by
<code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makeCluster</a></code>. See the <code>cl</code> argument of
<code><a href="https://rdrr.io/pkg/pbapply/man/pbapply.html" class="external-link">pbsapply</a></code> for details.</p></dd>
<dt>...</dt>
<dd><p>Additional arguments passed to <code><a href="write.neuron.html">write.neuron</a></code></p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>the path to the output file(s), absolute when this is a zip file.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>See <code><a href="write.neuron.html">write.neuron</a></code> for details of how to specify the
  file format/extension/name of the output files and how to establish what
  output file formats are available. A zip archive of files can be written by
  specifying a value of <code>dir</code> that ends in <code>.zip</code>. When rds files
  (R's binary data representation, which is compressed by default) are stored
  inside a zip file the are not further compressed (zip option 0).</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="write.neuron.html">write.neuron</a></code>, <code><a href="read.neurons.html">read.neurons</a></code>,
  <code><a href="fileformats.html">fileformats</a></code></p>
<p>Other neuronlist: 
<code><a href="neuronlist-arithmetic.html">*.neuronlist</a>()</code>,
<code><a href="is.neuronlist.html">is.neuronlist</a>()</code>,
<code><a href="neuronlist-dataframe-methods.html">neuronlist-dataframe-methods</a></code>,
<code><a href="neuronlistfh.html">neuronlistfh</a>()</code>,
<code><a href="neuronlistz.html">neuronlistz</a>()</code>,
<code><a href="neuronlist.html">neuronlist</a>()</code>,
<code><a href="nlapply.html">nlapply</a>()</code>,
<code><a href="read.neurons.html">read.neurons</a>()</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>jefferis</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># write some neurons in swc format</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">Cell07PNs</span>, dir<span class="op">=</span><span class="st">"testwn"</span>, format<span class="op">=</span><span class="st">'swc'</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># write some neurons in swc format for picky software</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">Cell07PNs</span>, dir<span class="op">=</span><span class="st">"testwn"</span>, format<span class="op">=</span><span class="st">'swc'</span>, normalise.ids<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># write some neurons in swc format and zip them up</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">Cell07PNs</span>, dir<span class="op">=</span><span class="st">"testwn.zip"</span>, format<span class="op">=</span><span class="st">'swc'</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># write some neurons in R's native RDS format using 3 cores for</span></span>
<span class="r-in"><span class="co"># parallel writes and then zip them up (storing rather than compressing)</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">Cell07PNs</span>, dir<span class="op">=</span><span class="st">"testwn.zip"</span>, format<span class="op">=</span><span class="st">'rds'</span>, cl<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># write some neurons in Amira hxlineset format</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">Cell07PNs</span>, dir<span class="op">=</span><span class="st">"testwn"</span>, format<span class="op">=</span><span class="st">'hxlineset'</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># write some neuron meshes in Stanford ply format (the default for meshes)</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">myneurons</span>, dir<span class="op">=</span><span class="st">"testwn"</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># specify the format to avoid a warning. Write to a zip file.</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">myneurons</span>, dir<span class="op">=</span><span class="st">"testmeshes.zip"</span>, format<span class="op">=</span><span class="st">'ply'</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Wavefront obj format</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">myneurons</span>, dir<span class="op">=</span><span class="st">"testwn"</span>, format<span class="op">=</span><span class="st">'obj'</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># organise new files in directory hierarchy by glomerulus and Scored.By field</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">Cell07PNs</span>,dir<span class="op">=</span><span class="st">"testwn"</span>,</span>
<span class="r-in">  subdir<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">Glomerulus</span>,<span class="va">Scored.By</span><span class="op">)</span>,format<span class="op">=</span><span class="st">'hxlineset'</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># ensure that the neurons are named according to neuronlist names</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">Cell07PNs</span>, dir<span class="op">=</span><span class="st">"testwn"</span>, files<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">Cell07PNs</span><span class="op">)</span>,</span>
<span class="r-in">  subdir<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">Glomerulus</span>,<span class="va">Scored.By</span><span class="op">)</span>,format<span class="op">=</span><span class="st">'hxlineset'</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># only write a subset</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="fu"><a href="subset.html">subset</a></span><span class="op">(</span><span class="va">Cell07PNs</span>, Scored.By<span class="op">=</span><span class="st">"ACH"</span><span class="op">)</span>,dir<span class="op">=</span><span class="st">"testwn2"</span>,</span>
<span class="r-in">  subdir<span class="op">=</span><span class="va">Glomerulus</span>,format<span class="op">=</span><span class="st">'hxlineset'</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># The same, but likely faster for big neuronlists</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="va">Cell07PNs</span>, dir<span class="op">=</span><span class="st">"testwn3"</span>,</span>
<span class="r-in">  INDICES<span class="op">=</span><span class="fu"><a href="subset.html">subset</a></span><span class="op">(</span><span class="va">Cell07PNs</span>,Scored.By<span class="op">=</span><span class="st">"ACH"</span>,rval<span class="op">=</span><span class="st">'names'</span><span class="op">)</span>,</span>
<span class="r-in">  subdir<span class="op">=</span><span class="va">Glomerulus</span>,format<span class="op">=</span><span class="st">'hxlineset'</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># set file name explicitly using a field in data.frame</span></span>
<span class="r-in"><span class="fu">write.neurons</span><span class="op">(</span><span class="fu"><a href="subset.html">subset</a></span><span class="op">(</span><span class="va">Cell07PNs</span>, Scored.By<span class="op">=</span><span class="st">"ACH"</span><span class="op">)</span>,dir<span class="op">=</span><span class="st">"testwn4"</span>,</span>
<span class="r-in">  subdir<span class="op">=</span><span class="va">Glomerulus</span>, files<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ID</span>,<span class="st">'.am'</span><span class="op">)</span>, format<span class="op">=</span><span class="st">'hxlineset'</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gregory Jefferis, James Manton, Sridhar Jagannathan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

